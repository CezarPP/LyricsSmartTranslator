<!DOCTYPE html>
<html>
<head>
    <title>Upload Image</title>
</head>
<body>
<h1>Upload Image</h1>
<form id="upload-form" enctype="multipart/form-data">
    <input type="file" id="image-upload" name="image" accept="image/*">
    <button type="submit">Upload</button>
</form>

<script>
    const form = document.getElementById('upload-form');

    form.addEventListener('submit', (event) => {
        event.preventDefault();

        const inputElement = document.getElementById('image-upload');

        const reader = new FileReader();

        reader.onloadend = function () {
            const base64String = reader.result.replace('data:', '').replace(/^.+,/, '');

            fetch('/api/image', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({image: base64String}),
            })
                .then(response => response.json())
                .then(data => console.log(data))
                .catch(error => console.error(error));
        }

        reader.readAsDataURL(inputElement.files[0]);
    });
</script>
</body>
</html>
